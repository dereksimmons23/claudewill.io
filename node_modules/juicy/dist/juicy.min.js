/*! juicy - v0.2.4 - 2012-07-25
* Copyright (c) 2012 Vadim Demedes; Licensed MIT. %> */
Function.prototype.merge=function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(this.prototype[b]=a.prototype[b]);return this},Function.prototype.include=function(a){var b=this;return a.ClassMethods&&Object.keys(a.ClassMethods.prototype).forEach(function(c){return b[c]=function(){return a.ClassMethods.prototype[c].apply(this,arguments)}}),a.InstanceMethods&&Object.keys(a.InstanceMethods.prototype).forEach(function(c){return b.prototype[c]=a.InstanceMethods.prototype[c]}),this};var eqlArray;Array.prototype.merge=function(a){if(!a instanceof Array)return!1},Array.prototype.eql=function(a){return!a instanceof Array?!1:eqlArray(this,a)},eqlArray=function(a,b){var c,d;if(!a instanceof Array||!b instanceof Array)return!1;d=a.length;if(d!==b.length)return!1;c=0;for(;;){if(c===d)break;if(a[c]instanceof Object){if(!a[c].eql(b[c]))return!1}else if(a[c]!==b[c])return!1;c++}return!0},Array.prototype.collect=function(a){var b,c,d,e;c=[];for(d=0,e=this.length;d<e;d++)b=this[d],c.push(a(b));return c},Array.prototype.combination=function(a){var b,c,d,e,f,g,h,i,j;if(a<=0||this.length===0)return[];f=[],c=[];for(g=0,i=this.length;g<i;g++)e=this[g],c.push(e);d=0,b=[];for(h=0,j=this.length;h<j;h++)e=this[h],d<a?b.push(e):(f.push(b),b=[],b.push(e),d=0),d++;return b.length>0&&f.push(b),f},Array.prototype.compact=function(){var a,b,c,d;b=[];for(c=0,d=this.length;c<d;c++)a=this[c],a!==void 0&&a!==null&&b.push(a);return b},Array.prototype.merge=function(a){var b,c,d,e,f,g;c=[];for(d=0,f=this.length;d<f;d++)b=this[d],c.push(b);for(e=0,g=a.length;e<g;e++)b=a[e],this.push(b),c.push(b);return c},Array.prototype.count=function(a){var b,c,d,e;if(typeof a!="function")return this.length;c=0;for(d=0,e=this.length;d<e;d++)b=this[d],a(b)&&c++;return c},Array.prototype.remove=function(a){var b,c;if(!a)return;c=void 0;for(;;){b=this.indexOf(a);if(b<0)return c;this.removeAt(b),c=a}},Array.prototype.removeAt=function(a){if(a<0)return;return this.splice(a,1)},Array.prototype.removeIf=function(a){var b,c,d,e;if(typeof a!="function")return;c=[];for(d=0,e=this.length;d<e;d++)b=this[d],a(b)||c.push(b);return c},Array.prototype.drop=function(a){return this.splice(0,a)},Array.prototype.dropWhile=function(a){var b,c,d,e;if(typeof a!="function")return;c=[];for(d=0,e=this.length;d<e;d++)b=this[d],a(b)||c.push(b);return c},Array.prototype.eachIndex=function(a){var b,c,d;if(typeof a!="function")return;b=0,c=this.length,d=[];for(;;){if(b===c)break;a(b),d.push(b++)}return d},Array.prototype.flatten=function(){var a,b;return b=[],a=function(b,c){var d,e,f,g;g=[];for(e=0,f=b.length;e<f;e++)d=b[e],d instanceof Array?g.push(a(d,c)):g.push(c.push(d));return g},a(this,b),b},Array.prototype.take=function(a){var b,c,d;if(a<1)return;d=[],b=0,c=this.length;for(;;){if(b===this.length||b===a)break;d.push(this[b]),b++}return d},Array.prototype.takeWhile=function(a){var b,c,d,e;if(typeof a!="function")return;c=[];for(d=0,e=this.length;d<e;d++)b=this[d],a(b)&&c.push(b);return c},Array.prototype.transpose=function(){var a,b,c,d,e;c=[],a=[];for(d=0,e=this.length;d<e;d++)b=this[d],c.push(b[0]),a.push(b[1]);return[c,a]},Array.prototype.__defineGetter__("transposed",function(){return this.transpose()}),Array.prototype.__defineGetter__("reversed",function(){return this.reverse()}),Array.prototype.__defineGetter__("compacted",function(){return this.compact()}),Array.prototype.__defineGetter__("flattened",function(){return this.flatten()}),Array.prototype.__defineGetter__("first",function(){return this[0]}),Array.prototype.__defineSetter__("first",function(a){return this[0]=a}),Array.prototype.__defineGetter__("last",function(){return this[this.length-1]}),Array.prototype.__defineSetter__("last",function(a){return this[this.length-1]=a}),Array.prototype.__defineGetter__("size",function(){return this.length});var eqlObject;Object.to_json=function(a){return JSON.stringify(a)},Object.to_xml=function(a,b){var c,d;return c=function(d,e){var f,g,h,i,j;e||(e=a),g=!d,d||(d=b),d=d.fields&&d.errors&&d.old?d.fields:d,h="";if(!Array.isArray(d)){g&&(h+="<"+e+">");for(f in d)d.hasOwnProperty(f)&&(h+="<"+f+">",Array.isArray(d[f])?h+=c(d[f],f.singularized):d[f]instanceof Object?h+=c(d[f]):h+=""+d[f],h+="</"+f+">");g&&(h+="</"+e+">")}if(Array.isArray(d))for(i=0,j=d.length;i<j;i++)f=d[i],Array.isArray(f)?(g&&(h+="<"+e+">"),h+=c(f),g&&(h+="</"+e+">")):f instanceof Object?(g&&(h+="<"+e+">"),h+=c(f),g&&(h+="</"+e+">")):(h+="<"+e+">",h+=f,h+="</"+e+">");return h},d='<?xml version="1.0" encoding="utf-8"?>',d+="<"+a.pluralized+">",d+=c(),d+="</"+a.pluralized+">",d},Object.merge=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},Object.eql=function(a,b){return!a instanceof Object||!b instanceof Object?!1:eqlObject(a,b)},eqlObject=function(a,b){var c,d,e;if(!a instanceof Object||!b instanceof Object)return!1;c=0;for(e in a)a.hasOwnProperty(e)&&c++;d=0;for(e in b)b.hasOwnProperty(e)&&d++;if(c!==d)return!1;for(e in a)if(a.hasOwnProperty(e))if(a[e]instanceof Object){if(!Object.eql(a[e],b[e]))return!1}else if(a[e]!==b[e])return!1;return!0},Object.keys||(Object.keys=function(){var a,b;a=[];for(b in this)this.hasOwnProperty(b)&&a.push(b);return a}),Object.values||(Object.values=function(){var a,b;b=[];for(a in this)this.hasOwnProperty(a)&&b.push(this[a]);return b}),window&&!window.InflectionJS&&(window.InflectionJS=null),InflectionJS={uncountable_words:["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],plural_rules:[[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],singular_rules:[[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("s$","gi"),""]],non_titlecased_words:["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],id_suffix:new RegExp("(_ids|_id)$","g"),underbar:new RegExp("_","g"),space_or_underbar:new RegExp("[ _]","g"),uppercase:new RegExp("([A-Z])","g"),underbar_prefix:new RegExp("^_"),apply_rules:function(a,b,c,d){if(d)a=d;else{var e=c.indexOf(a.toLowerCase())>-1;if(!e)for(var f=0;f<b.length;f++)if(a.match(b[f][0])){a=a.replace(b[f][0],b[f][1]);break}}return a}},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b,c){b||(b=-1);var d=-1;for(var e=b;e<this.length;e++)if(this[e]===a||c&&c(this[e],a)){d=e;break}return d}),String.prototype._uncountable_words||(String.prototype._uncountable_words=InflectionJS.uncountable_words),String.prototype._plural_rules||(String.prototype._plural_rules=InflectionJS.plural_rules),String.prototype._singular_rules||(String.prototype._singular_rules=InflectionJS.singular_rules),String.prototype._non_titlecased_words||(String.prototype._non_titlecased_words=InflectionJS.non_titlecased_words),String.prototype.pluralize||(String.prototype.pluralize=function(a){return InflectionJS.apply_rules(this,this._plural_rules,this._uncountable_words,a)}),String.prototype.singularize||(String.prototype.singularize=function(a){return InflectionJS.apply_rules(this,this._singular_rules,this._uncountable_words,a)}),String.prototype.camelize||(String.prototype.camelize=function(a){var b=this.toLowerCase(),c=b.split("/");for(var d=0;d<c.length;d++){var e=c[d].split("_"),f=a&&d+1===c.length?1:0;for(var g=f;g<e.length;g++)e[g]=e[g].charAt(0).toUpperCase()+e[g].substring(1);c[d]=e.join("")}return b=c.join("::"),b}),String.prototype.underscore||(String.prototype.underscore=function(){var a=this,b=a.split("::");for(var c=0;c<b.length;c++)b[c]=b[c].replace(InflectionJS.uppercase,"_$1"),b[c]=b[c].replace(InflectionJS.underbar_prefix,"");return a=b.join("/").toLowerCase(),a}),String.prototype.humanize||(String.prototype.humanize=function(a){var b=this.toLowerCase();return b=b.replace(InflectionJS.id_suffix,""),b=b.replace(InflectionJS.underbar," "),a||(b=b.capitalize()),b}),String.prototype.capitalize||(String.prototype.capitalize=function(){var a=this.toLowerCase();return a=a.substring(0,1).toUpperCase()+a.substring(1),a}),String.prototype.dasherize||(String.prototype.dasherize=function(){var a=this;return a=a.replace(InflectionJS.space_or_underbar,"-"),a}),String.prototype.titleize||(String.prototype.titleize=function(){var a=this.toLowerCase();a=a.replace(InflectionJS.underbar," ");var b=a.split(" ");for(var c=0;c<b.length;c++){var d=b[c].split("-");for(var e=0;e<d.length;e++)this._non_titlecased_words.indexOf(d[e].toLowerCase())<0&&(d[e]=d[e].capitalize());b[c]=d.join("-")}return a=b.join(" "),a=a.substring(0,1).toUpperCase()+a.substring(1),a}),String.prototype.demodulize||(String.prototype.demodulize=function(){var a=this,b=a.split("::");return a=b[b.length-1],a}),String.prototype.tableize||(String.prototype.tableize=function(){var a=this;return a=a.underscore().pluralize(),a}),String.prototype.classify||(String.prototype.classify=function(){var a=this;return a=a.camelize().singularize(),a}),String.prototype.foreign_key||(String.prototype.foreign_key=function(a){var b=this;return b=b.demodulize().underscore()+(a?"":"_")+"id",b}),String.prototype.ordinalize||(String.prototype.ordinalize=function(){var a=this,b=a.split(" ");for(var c=0;c<b.length;c++){var d=parseInt(b[c]);if(d===NaN){var e=b[c].substring(b[c].length-2),f=b[c].substring(b[c].length-1),g="th";e!="11"&&e!="12"&&e!="13"&&(f==="1"?g="st":f==="2"?g="nd":f==="3"&&(g="rd")),b[c]+=g}}return a=b.join(" "),a}),String.prototype.__defineGetter__("basename",function(){return this.replace(/^.*[\/\\]/g,"")}),String.prototype.__defineGetter__("extension",function(){var a;return a=this.replace(/^.*[\/\\]/g,"").split("."),a.slice(1,a.length-1+1||9e9).join(".")}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),String.prototype.__defineGetter__("trimmed",function(){return this.trim()}),String.prototype.__defineGetter__("pluralized",function(){return this.pluralize()}),String.prototype.__defineGetter__("singularized",function(){return this.singularize()}),String.prototype.__defineGetter__("camelized",function(){return this.camelize()}),String.prototype.__defineGetter__("underscored",function(){return this.underscore()}),String.prototype.__defineGetter__("humanized",function(){return this.humanize()}),String.prototype.__defineGetter__("capitalized",function(){return this.capitalize()}),String.prototype.__defineGetter__("dasherized",function(){return this.dasherize()}),String.prototype.__defineGetter__("titleized",function(){return this.titleize()}),String.prototype.__defineGetter__("demodulized",function(){return this.demodulize()}),String.prototype.__defineGetter__("tableized",function(){return this.tableize()}),String.prototype.__defineGetter__("ordinalized",function(){return this.ordinalize()}),String.prototype.__defineGetter__("foreignKey",function(){return this.foreign_key()}),String.prototype.__defineGetter__("downcase",function(){return this.toLowerCase()}),String.prototype.__defineGetter__("upcase",function(){return this.toUpperCase()}),Number.prototype.__defineGetter__("second",function(){return 1e3}),Number.prototype.__defineGetter__("seconds",function(){return this*1e3}),Number.prototype.__defineGetter__("minute",function(){return 6e4}),Number.prototype.__defineGetter__("minutes",function(){return this*6e4}),Number.prototype.__defineGetter__("hour",function(){return 36e5}),Number.prototype.__defineGetter__("hours",function(){return this*36e5}),Number.prototype.__defineGetter__("day",function(){return 864e5}),Number.prototype.__defineGetter__("days",function(){return this*864e5}),Number.prototype.__defineGetter__("week",function(){return 6048e5}),Number.prototype.__defineGetter__("weeks",function(){return this*6048e5}),Number.prototype.__defineGetter__("month",function(){return 2628e6}),Number.prototype.__defineGetter__("months",function(){return this*2628e6}),Number.prototype.__defineGetter__("year",function(){return 31536e6}),Number.prototype.__defineGetter__("years",function(){return this*31536e6});