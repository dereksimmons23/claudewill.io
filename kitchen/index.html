<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>the kitchen | claudewill*</title>
  <meta name="description" content="How one person runs a consulting practice with AI. The crew, the agents, the overnight work — all of it.">

  <link rel="icon" type="image/svg+xml" href="/favicon-cw-dark.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/css/shared-nav.css">
  <link rel="stylesheet" href="/css/kitchen.css">
  <link rel="stylesheet" href="/css/porch-widget.css">

  <!-- Open Graph -->
  <meta property="og:title" content="the kitchen — claudewill*">
  <meta property="og:description" content="How one person runs a consulting practice with AI. The crew, the agents, the overnight work — all of it.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://claudewill.io/kitchen">
</head>
<body class="kitchen-page">

  <header class="page-header" id="page-header">
    <a href="/" class="page-header-left"><span class="header-short">cw</span><span class="header-full">claudewill</span><span class="hw">*</span></a>
    <div class="page-header-center">
      <span class="kitchen-page-label">the kitchen</span>
    </div>
    <button class="page-header-right palette-trigger" aria-label="Open navigation">menu</button>
  </header>

  <div class="container">
    <main>

      <!-- Hero -->
      <div class="kitchen-hero">
        <h1 class="kitchen-title">the kitchen<span class="hw">*</span></h1>
        <p class="kitchen-subtitle">How one person runs a consulting practice with AI.</p>
        <div class="kitchen-meta">
          <span class="kitchen-status">
            <span class="kitchen-status-dot" id="status-dot"></span>
            <span id="status-text">loading...</span>
          </span>
        </div>
      </div>

      <!-- Panel Grid -->
      <div class="kitchen-grid">

        <!-- 1. Overnight Report -->
        <section class="kitchen-panel panel-wide" id="panel-overnight">
          <h2 class="panel-title">the overnight report*</h2>
          <div class="panel-body" id="overnight-content">
            <div class="loading-state">checking agents...</div>
          </div>
        </section>

        <!-- 2. The Crew -->
        <section class="kitchen-panel" id="panel-crew">
          <h2 class="panel-title">the crew*</h2>
          <div class="panel-body" id="crew-content">
            <div class="loading-state">loading crew...</div>
          </div>
        </section>

        <!-- 3. The Board -->
        <section class="kitchen-panel" id="panel-board">
          <h2 class="panel-title">the board*</h2>
          <div class="panel-body" id="board-content">
            <div class="loading-state">loading projects...</div>
          </div>
        </section>

        <!-- 4. The Stack -->
        <section class="kitchen-panel" id="panel-stack">
          <h2 class="panel-title">the stack*</h2>
          <div class="panel-body" id="stack-content">
            <div class="loading-state">loading stack...</div>
          </div>
        </section>

        <!-- 5. The Method -->
        <section class="kitchen-panel" id="panel-method">
          <h2 class="panel-title">the method*</h2>
          <div class="panel-body" id="method-content">
            <div class="loading-state">loading method...</div>
          </div>
        </section>

      </div>

      <!-- Bottom Note -->
      <div class="kitchen-note">
        <p>This page updates every morning at 5 AM CST when the overnight agents run. The data is real. The agents are real. The practice is ongoing.</p>
        <p>Interested in how this could work for your organization? <a href="/work-with-me">Let's talk.</a></p>
      </div>

    </main>

    <footer>
      <p class="footer-note">Built by <a href="/derek">Derek</a><span class="hw">*</span><a href="/">Claude</a> &middot; &copy; 2026 CW Strategies LLC</p>
      <p class="footer-note"><a href="/story#the-cw-standard">the standard</a> &middot; <a href="/privacy">privacy</a> &middot; <a href="/terms">terms</a></p>
    </footer>
  </div>

  <!-- Kitchen Data Loader -->
  <script>
  (function () {
    'use strict';

    var DATA_URL = '/kitchen-data.json';

    // ── DOM Helpers ──────────────────────────────────

    function el(id) { return document.getElementById(id); }

    function clear(node) {
      while (node.firstChild) node.removeChild(node.firstChild);
    }

    function div(cls, text) {
      var d = document.createElement('div');
      if (cls) d.className = cls;
      if (text !== undefined) d.textContent = text;
      return d;
    }

    function span(cls, text) {
      var s = document.createElement('span');
      if (cls) s.className = cls;
      if (text !== undefined) s.textContent = text;
      return s;
    }

    function link(href, text, cls) {
      var a = document.createElement('a');
      a.href = href;
      a.textContent = text;
      if (cls) a.className = cls;
      return a;
    }

    function timeAgo(isoStr) {
      if (!isoStr) return 'never';
      var diff = Date.now() - new Date(isoStr).getTime();
      var mins = Math.floor(diff / 60000);
      if (mins < 60) return mins + 'm ago';
      var hrs = Math.floor(mins / 60);
      if (hrs < 24) return hrs + 'h ago';
      var days = Math.floor(hrs / 24);
      return days + 'd ago';
    }

    // ── Panel Renderers ─────────────────────────────

    function renderOvernight(agents) {
      var container = el('overnight-content');
      clear(container);

      var keys = ['siteAudit', 'gemini', 'research', 'codeReview'];
      for (var i = 0; i < keys.length; i++) {
        var agent = agents[keys[i]];
        if (!agent) continue;

        var card = div('agent-card');

        // Header row
        var header = div('agent-header');
        var dot = span('agent-dot ' + (agent.status === 'ok' ? 'dot-ok' : agent.status === 'flags' ? 'dot-flags' : 'dot-off'));
        header.appendChild(dot);
        header.appendChild(span('agent-name', agent.name));
        header.appendChild(span('agent-time', timeAgo(agent.lastRun)));
        card.appendChild(header);

        // Summary
        card.appendChild(div('agent-summary', agent.summary));

        // Flags
        if (agent.flags && agent.flags.length > 0) {
          var flagList = div('agent-flags');
          for (var f = 0; f < agent.flags.length; f++) {
            flagList.appendChild(div('agent-flag', agent.flags[f]));
          }
          card.appendChild(flagList);
        }

        container.appendChild(card);
      }
    }

    function renderCrew(data) {
      var container = el('crew-content');
      clear(container);

      // Thinking lenses
      var lensLabel = div('crew-section-label', 'thinking lenses');
      container.appendChild(lensLabel);

      var lenses = [
        { name: '/earn', desc: 'Business lens — revenue, clients, ROI' },
        { name: '/connect', desc: 'Cross-project lens — patterns, synergies' },
        { name: '/sharpen', desc: 'Quality lens — voice, consistency, brand' },
        { name: '/challenge', desc: 'Pushback lens — simplify, question, prioritize' }
      ];

      for (var i = 0; i < lenses.length; i++) {
        var row = div('crew-row');
        row.appendChild(span('crew-name', lenses[i].name));
        row.appendChild(span('crew-desc', lenses[i].desc));
        container.appendChild(row);
      }

      // Operational agents
      var agentLabel = div('crew-section-label', 'overnight agents');
      container.appendChild(agentLabel);

      var agents = data.agents;
      var agentList = [
        { key: 'siteAudit', cmd: '/audit' },
        { key: 'gemini', cmd: '/industry' },
        { key: 'research', cmd: '/research' },
        { key: 'codeReview', cmd: '/codecheck' }
      ];

      for (var j = 0; j < agentList.length; j++) {
        var a = agents[agentList[j].key];
        if (!a) continue;
        var arow = div('crew-row');
        var adot = span('agent-dot-inline ' + (a.status === 'ok' ? 'dot-ok' : a.status === 'flags' ? 'dot-flags' : 'dot-off'));
        arow.appendChild(adot);
        arow.appendChild(span('crew-name', agentList[j].cmd));
        arow.appendChild(span('crew-desc', a.name + (a.lastRun ? ' — ' + timeAgo(a.lastRun) : ' — not yet active')));
        container.appendChild(arow);
      }
    }

    function renderBoard(projects) {
      var container = el('board-content');
      clear(container);

      var categories = ['business', 'portfolio', 'personal', 'infrastructure'];
      var labels = { business: 'business', portfolio: 'portfolio', personal: 'personal', infrastructure: 'infrastructure' };

      for (var c = 0; c < categories.length; c++) {
        var cat = categories[c];
        var items = projects.filter(function (p) { return p.category === cat; });
        if (items.length === 0) continue;

        container.appendChild(div('board-category', labels[cat]));

        for (var i = 0; i < items.length; i++) {
          var row = div('board-row');
          var nameCol = div('board-name');
          nameCol.appendChild(span('', items[i].name));
          var statusBadge = span('board-status ' + (
            items[i].status === 'Active client' ? 'status-active' :
            items[i].status === 'Live' || items[i].status === 'Autonomous' ? 'status-live' :
            'status-other'
          ), items[i].status);
          nameCol.appendChild(statusBadge);
          row.appendChild(nameCol);
          row.appendChild(div('board-note', items[i].note));
          container.appendChild(row);
        }
      }
    }

    function renderStack(ecosystem) {
      var container = el('stack-content');
      clear(container);

      var stack = ecosystem.stack;
      for (var i = 0; i < stack.length; i++) {
        var row = div('stack-row');
        row.appendChild(span('stack-name', stack[i].name));
        row.appendChild(span('stack-role', stack[i].role));
        container.appendChild(row);
      }

      var cost = div('stack-cost');
      cost.appendChild(span('stack-cost-label', 'total monthly cost'));
      cost.appendChild(span('stack-cost-value', ecosystem.monthlyCost));
      container.appendChild(cost);
    }

    function renderMethod(ecosystem) {
      var container = el('method-content');
      clear(container);

      var method = ecosystem.method;
      var keys = ['session', 'memory', 'crew', 'agents', 'tools'];
      var labels = {
        session: 'the session',
        memory: 'the memory',
        crew: 'the crew',
        agents: 'the agents',
        tools: 'the tools'
      };

      for (var i = 0; i < keys.length; i++) {
        if (!method[keys[i]]) continue;
        var row = div('method-row');
        row.appendChild(div('method-label', labels[keys[i]]));
        row.appendChild(div('method-desc', method[keys[i]]));
        container.appendChild(row);
      }
    }

    function updateStatus(data) {
      var dot = el('status-dot');
      var text = el('status-text');

      if (!data || !data.lastUpdated) {
        dot.className = 'kitchen-status-dot dot-off';
        text.textContent = 'no data';
        return;
      }

      var ago = timeAgo(data.lastUpdated);
      text.textContent = 'updated ' + ago;

      // Check if any agent has flags
      var hasFlags = false;
      var agents = data.agents || {};
      for (var key in agents) {
        if (agents[key].status === 'flags') hasFlags = true;
      }

      dot.className = 'kitchen-status-dot ' + (hasFlags ? 'dot-flags' : 'dot-ok');
    }

    // ── Load and Render ─────────────────────────────

    function loadKitchen() {
      fetch(DATA_URL)
        .then(function (res) {
          if (!res.ok) throw new Error('Failed to load kitchen data');
          return res.json();
        })
        .then(function (data) {
          updateStatus(data);
          renderOvernight(data.agents || {});
          renderCrew(data);
          renderBoard(data.projects || []);
          renderStack(data.ecosystem || {});
          renderMethod(data.ecosystem || {});
        })
        .catch(function () {
          updateStatus(null);
          var panels = ['overnight-content', 'crew-content', 'board-content', 'stack-content', 'method-content'];
          for (var i = 0; i < panels.length; i++) {
            var p = el(panels[i]);
            if (p) {
              clear(p);
              p.appendChild(div('empty-state', 'Data unavailable. The overnight agents may not have run yet.'));
            }
          }
        });
    }

    loadKitchen();

  })();
  </script>

  <!-- Auto-hide header on scroll -->
  <script>
    (function () {
      var header = document.getElementById('page-header');
      if (!header) return;
      var lastY = 0;
      window.addEventListener('scroll', function () {
        var y = window.scrollY;
        if (y > 80 && y > lastY) {
          header.classList.add('hidden');
        } else {
          header.classList.remove('hidden');
        }
        lastY = y;
      }, { passive: true });
    })();
  </script>

  <!-- Porch Widget -->
  <script src="/js/cw-link-renderer.js"></script>
  <script src="/js/porch-widget.js" defer></script>
  <script src="/js/shared-nav.js"></script>

</body>
</html>
